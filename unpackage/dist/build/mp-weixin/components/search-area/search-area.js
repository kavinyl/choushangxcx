"use strict";var t=require("../../common/vendor.js");const s={name:"search-area",props:{},options:{styleIsolation:"shared"},data:()=>({historyDatas:[],hotDatas:[],autoShow:!1,autoSearch:[],searchValue:"",historyNum:1,autoDatas:[]}),onShow(){this.getClass()},methods:{getClass(){t.index.request({url:"http://123.60.71.74:20001/mh/product/class/list",method:"GET",success:t=>{this.autoDatas=t.data.data,console.log(this.autoDatas),this.test()}})},checkInput(){let t=this.searchValue.replace(/\s+/g,"");return this.searchValue=t,""==t},search(s){this.checkInput()?t.index.showToast({title:"请输入搜索内容!",icon:"none"}):(this.setHistory(),this.setcache(),t.index.redirectTo({url:"searchDetail"}))},searchHistory(s){t.index.redirectTo({url:"searchDetail"})},checkRepeat(t){for(let s=0;s<t.length;s++)for(let a=s+1;a<t.length;a++)t[s].keyword===t[a].keyword&&(t.splice(a,1),a--)},test(){this.autoDatas.forEach((t=>{t.productClass2VoList.forEach((t=>{t.productClass3VoList=[{class3Name:"1",productCode:"283795428807319552"},{class3Name:"2"},{class3Name:"3"},{class3Name:"aaa"}]}))}))},autoComplete(t){let s=[];this.autoDatas.forEach((a=>{a.productClass2VoList.forEach((a=>{a.productClass3VoList.forEach((a=>{-1!=a.class3Name.indexOf(t)&&s.push(a)}))}))})),this.autoSearch=s,console.log("as",this.autoSearch)},focus(t){},blur(t){this.searchValue=t.value,this.autoShow=!1},input(t){var s=this;""!=t&&(s.searchValue=t,s.autoShow=!0,s.autoComplete(t))},cancel(t){this.searchValue=t.value,this.autoShow=!1},setcache(){t.index.setStorage({key:"historyDatas",data:this.historyDatas,success:function(){}}),t.index.setStorage({key:"historyNum",data:this.historyNum,success:function(){}})},gopage(s){this.searchValue=s.class3Name,this.setHistory(),t.index.setStorageSync("productCode",s.productCode),t.index.navigateTo({url:"/sub-play/pages/play"})},setHistory(){this.historyNum=t.index.getStorageSync("historyNum"),this.historyNum++;var s=new Object({id:Date.now(),keyword:this.searchValue});t.index.getStorageSync("historyDatas")?this.historyDatas=t.index.getStorageSync("historyDatas"):t.index.setStorageSync("historyDatas"),this.historyDatas.unshift(s),this.checkRepeat(this.historyDatas),console.log(this.historyDatas),this.historyDatas.length>10&&this.historyDatas.pop()}},mounted(){},watch:{autoDatas:function(t,s){},historyNum:function(t,s){this.$emit("history",this.historyDatas)}}};if(!Array){t.resolveComponent("uni-search-bar")()}Math;var a=t._export_sfc(s,[["render",function(s,a,e,o,h,r){return{a:t.o(r.search),b:t.o(r.blur),c:t.o(r.focus),d:t.o(r.cancel),e:t.o(r.input),f:t.o((t=>h.searchValue=t)),g:t.p({focus:!0,placeholder:"搜索关键词",cancelButton:"none",modelValue:h.searchValue}),h:t.o(((...t)=>r.search&&r.search(...t))),i:t.f(h.autoSearch,((s,a,e)=>({a:t.t(s.class3Name),b:a,c:t.o((t=>r.gopage(s)),a)}))),j:h.autoShow&&h.autoDatas.length>0}}]]);wx.createComponent(a);
