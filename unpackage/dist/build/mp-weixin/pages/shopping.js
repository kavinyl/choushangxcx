"use strict";var e=require("../common/vendor.js");const t={data:()=>({items:["全部","我的发布","我的竞拍"],items2:["全部","我的出售","我的收购"],styles:[{value:"button",text:"按钮",checked:!0},{value:"text",text:"文字"}],colors:["#FDA804","#4cd964","#dd524d"],current:0,colorIndex:0,activeColor:"#FDA804",styleType:"text",update:!0,isFlash:!1,dealList:[],myPublish:[],myAuction:[],searchValue:"",user:{name:"上山打老虎"},hasConditions:!1,searchVal2:"",doSearch:!1,flashList:[],flashSearch:!1,flashSearchList:[],searchClass:[],searchFlashValue:"",mySellList:[],changeSellValue:"",changeBuyValue:""}),onLoad(){this.getJson()},methods:{onClickItem(e){this.current!==e.currentIndex&&(this.current=e.currentIndex)},forceupdate(){this.update=!1,this.update=!0},getJson(){e.index.request({url:"https://xcxcs.obs.cn-east-3.myhuaweicloud.com/fake.json",method:"get",dataType:"JSON",success:e=>{let t=JSON.parse(e.data);this.dealList=t.shop,this.flashList=t.flash,this.mySellList=[{imgUrl:"https://xcxcs.obs.cn-east-3.myhuaweicloud.com/images/shop/f1.png",name:"十二星座白羊座",class1Name:"大分类A",class2Name:"分类a",class3Name:"品类1",price:"320.0",amount:1,soldAmount:0},{imgUrl:"https://xcxcs.obs.cn-east-3.myhuaweicloud.com/images/shop/f2.png",name:"世界名画",class1Name:"大分类A",class2Name:"分类a",class3Name:"品类1",price:"320.0",amount:5,soldAmount:2},{imgUrl:"https://xcxcs.obs.cn-east-3.myhuaweicloud.com/images/shop/f3.png",name:"爱咕噜小猪仔仔",class1Name:"大分类A",class2Name:"分类a",class3Name:"品类1",price:"58.0",amount:5,soldAmount:1},{imgUrl:"https://xcxcs.obs.cn-east-3.myhuaweicloud.com/images/shop/f4.png",name:"从零开始的异世界生活-欢喜篇",class1Name:"从零开始的异世界生活",class2Name:"从零开始的异世界生活-欢喜篇",class3Name:"品类1",price:"58.0",amount:1,soldAmount:1}]}})},toDeal(t){e.index.navigateTo({url:"shopping/dealDetail"})},toFlash(e){this.current=0,"y"==e?this.isFlash=!0:"n"==e&&(this.isFlash=!1)},toFlashDetail(t){e.index.navigateTo({url:"/pages/shopping/flashdetail"})},search(){},goBag(){e.index.navigateTo({url:"category/bag"})},searchFlash(){console.log(1)},deleteSellShow(){this.$refs.delete.open()},deleteBuyShow(){this.$refs.delete2.open()},deleteSellConfirm(){console.log("删除"),this.$refs.delete.close()},deleteBuyConfirm(){console.log("删除"),this.$refs.delete2.close()},deleteSellClose(){console.log("取消"),this.$refs.delete.close()},deleteBuyClose(){console.log("取消"),this.$refs.delete2.close()},changeSellShow(){this.$refs.changeSell.open()},changeBuyShow(){this.$refs.changeBuy.open()},changeSellConfirm(t,o){this.changeSellValue=o,this.changeCheck("sell")&&(e.index.showToast({title:"修改成功",icon:"success"}),this.$refs.changeSell.close())},changeBuyConfirm(t,o){this.changeBuyValue=o,this.changeCheck("buy")&&(e.index.showToast({title:"修改成功",icon:"success"}),console.log("新收购",this.changeBuyValue),this.$refs.changeBuy.close())},changeCheck(t){var o;switch(t){case"sell":o=this.changeSellValue;break;case"buy":o=this.changeBuyValue}return/^[0-9]+\.?[0-9]{0,2}$/g.test(o)?"0"!=o||(e.index.showToast({title:"价格不能为零！",icon:"error"}),!1):(e.index.showToast({title:"请输入正确的金额",icon:"error"}),!1)}},watch:{dealList:function(e){var t=this;console.log(e),e.forEach((function(e){t.user.name==e.username&&t.myPublish.push(e),e.auction.forEach((function(o){t.user.name==o.username&&t.myAuction.push(e)}))}))}}};if(!Array){(e.resolveComponent("uni-segmented-control")+e.resolveComponent("uni-search-bar")+e.resolveComponent("uni-popup-dialog")+e.resolveComponent("uni-popup"))()}Math||((()=>"../uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control.js")+(()=>"../uni_modules/uni-search-bar/components/uni-search-bar/uni-search-bar.js")+(()=>"../uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog.js")+(()=>"../uni_modules/uni-popup/components/uni-popup/uni-popup.js"))();var o=e._export_sfc(t,[["render",function(t,o,s,l,a,n){return e.e({a:a.isFlash?"":1,b:e.o((e=>n.toFlash("n"))),c:a.isFlash?1:"",d:e.o((e=>n.toFlash("y"))),e:e.o(n.onClickItem),f:e.p({current:a.current,values:a.items,"style-type":a.styleType,"active-color":a.activeColor}),g:e.o(n.search),h:e.o((e=>a.searchValue=e)),i:e.p({placeholder:"搜索关键词",cancelButton:"none",focus:!1,modelValue:a.searchValue}),j:0===a.current},0===a.current?{k:e.f(a.dealList,((t,o,s)=>({a:t.userimgUrl,b:e.t(t.username),c:e.t(t.date),d:!t.isComplete,e:t.isComplete,f:e.t(t.info),g:t.wish.imgUrl,h:e.t(t.wish.type),i:t.wish.has&&!1,j:e.f(t.list,((t,o,s)=>({a:t.imgUrl,b:e.t(t.type),c:o}))),k:e.t(t.lowPrice),l:e.t(t.onePrice),m:e.t(t.auctionTimes),n:o,o:e.o((e=>n.toDeal(t)),o)})))}:{},{l:1===a.current},1===a.current?{m:e.f(a.myPublish,((t,o,s)=>({a:t.userimgUrl,b:e.t(t.username),c:e.t(t.date),d:!t.isComplete,e:t.isComplete,f:e.t(t.info),g:e.f(t.list,((t,o,s)=>({a:t.imgUrl,b:e.t(t.type),c:o}))),h:e.t(t.lowPrice),i:e.t(t.onePrice),j:e.t(t.auctionTimes),k:o,l:e.o((e=>n.toDeal(t)),o)})))}:{},{n:2===a.current},2===a.current?{o:e.f(a.myAuction,((t,o,s)=>({a:t.userimgUrl,b:e.t(t.username),c:e.t(t.date),d:!t.isComplete,e:t.isComplete,f:e.t(t.info),g:e.f(t.list,((t,o,s)=>({a:t.imgUrl,b:e.t(t.type),c:o}))),h:e.t(t.lowPrice),i:e.t(t.onePrice),j:e.t(t.auctionTimes),k:o,l:e.o((e=>n.toDeal(t)),o)})))}:{},{p:a.update,q:!a.isFlash,r:e.o(n.onClickItem),s:e.p({current:a.current,values:a.items2,"style-type":a.styleType,"active-color":a.activeColor}),t:e.o(n.searchFlash),v:e.o((e=>a.searchFlashValue=e)),w:e.p({placeholder:"搜索关键词",focus:!1,cancelButton:"none",modelValue:a.searchFlashValue}),x:0===a.current},0===a.current?{y:e.f(a.flashList,((t,o,s)=>({a:t.imgUrl,b:e.t(t.name),c:o,d:e.o((e=>n.toFlashDetail(t)),o)})))}:{},{z:1===a.current},1===a.current?{A:e.f(a.mySellList,((t,o,s)=>e.e({a:t.imgUrl,b:e.t(t.name),c:e.t(t.class2Name),d:e.t(t.class3Name),e:e.t(t.price),f:t.amount>t.soldAmount},t.amount>t.soldAmount?{g:e.o(((...e)=>n.changeSellShow&&n.changeSellShow(...e)))}:{},{h:e.t(t.amount),i:t.soldAmount>0},t.soldAmount>0?{j:e.t(t.soldAmount)}:{},{k:t.amount>t.soldAmount},t.amount>t.soldAmount?{l:e.o(((...e)=>n.deleteSellShow&&n.deleteSellShow(...e)))}:{},{m:t.amount==t.soldAmount},(t.amount,t.soldAmount,{}),{n:o})))}:{},{B:2===a.current},2===a.current?{C:e.f(a.mySellList,((t,o,s)=>e.e({a:t.imgUrl,b:e.t(t.name),c:e.t(t.class2Name),d:e.t(t.class3Name),e:e.t(t.price),f:t.amount>t.soldAmount},t.amount>t.soldAmount?{g:e.o(((...e)=>n.changeBuyShow&&n.changeBuyShow(...e)))}:{},{h:e.t(t.amount),i:t.soldAmount>0},t.soldAmount>0?{j:e.t(t.soldAmount)}:{},{k:t.amount>t.soldAmount},t.amount>t.soldAmount?{l:e.o(((...e)=>n.deleteBuyShow&&n.deleteBuyShow(...e)))}:{},{m:t.amount==t.soldAmount},(t.amount,t.soldAmount,{}),{n:o})))}:{},{D:a.isFlash,E:e.o(n.deleteSellConfirm),F:e.o(n.deleteSellClose),G:e.p({type:"success",cancelText:"取消",confirmText:"确认",title:"通知",content:"是否删除当前记录!"}),H:e.sr("delete","42793466-4"),I:e.p({type:"dialog"}),J:e.o(n.deleteBuyConfirm),K:e.o(n.deleteBuyClose),L:e.p({type:"success",cancelText:"取消",confirmText:"确认",title:"通知",content:"是否删除当前记录!"}),M:e.sr("delete2","42793466-6"),N:e.p({type:"dialog"}),O:e.sr("inputClose","42793466-9,42793466-8"),P:e.o(n.changeSellConfirm),Q:e.o((e=>a.changeSellValue=e)),R:e.p({mode:"input",title:"输入出售金额",placeholder:"请输入金额",modelValue:a.changeSellValue}),S:e.sr("changeSell","42793466-8"),T:e.p({type:"dialog"}),U:e.sr("inputClose","42793466-11,42793466-10"),V:e.o(n.changeBuyConfirm),W:e.o((e=>a.changeBuyValue=e)),X:e.p({mode:"input",title:"输入收购金额",placeholder:"请输入金额",modelValue:a.changeBuyValue}),Y:e.sr("changeBuy","42793466-10"),Z:e.p({type:"dialog"})})}]]);wx.createPage(o);
